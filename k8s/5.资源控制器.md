```yaml
apiVersion: extensions/v1beta1
kind: ReplicaSet
metadata:
  name: frontend
spec:
  replicas: 2
  selector:    ##选择标签
    matchLabels:    #匹配标签
      app: frontend   #标签名
  template:    #模板
    metadata:
      labels:
        app: frontend
    spec:
      containers:
      - name: nginx
        image: nginx
        env:   #注入环境变量
        - name: GET_HOST_FROM
          value: dns
        ports:
        - containerPort: 80
```

```yaml
[root@master01 myapp]# vim frontend.yaml
[root@master01 myapp]# kubectl get pod
NAME                    READY   STATUS    RESTARTS   AGE
myapp-pod               1/1     Running   0          23h
readiness-httpget-pod   1/1     Running   0          22h
[root@master01 myapp]# kubectl delete pod --all
pod "myapp-pod" deleted
pod "readiness-httpget-pod" deleted
[root@master01 myapp]# kubectl get pod
No resources found.
[root@master01 myapp]# kubectl get svc
NAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)   AGE
kubernetes   ClusterIP   10.96.0.1        <none>        443/TCP   33h
mydb         ClusterIP   10.96.201.14     <none>        80/TCP    22h
myservice    ClusterIP   10.110.163.186   <none>        80/TCP    22h
[root@master01 myapp]# kubectl delete svc mydb myservice
service "mydb" deleted
service "myservice" deleted
[root@master01 myapp]# kubectl get svc
NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP   33h
[root@master01 myapp]# kubectl get deployment
No resources found.
# 上面为清空环境
[root@master01 myapp]# kubectl create -f  frontend.yaml 
replicaset.extensions/frontend created
# 启动后会创建两个pod，并由rs控制器维持在两个pod，删除了会重新创建
[root@master01 myapp]# kubectl get pod
NAME             READY   STATUS              RESTARTS   AGE
frontend-97bmm   0/1     ContainerCreating   0          10s
frontend-h2zkk   0/1     ContainerCreating   0          10s
# 删除会维持为两个副本，重新创建两个pod
[root@master01 myapp]# kubectl delete pod --all
pod "frontend-97bmm" deleted
pod "frontend-h2zkk" deleted
[root@master01 myapp]# kubectl get pod
NAME             READY   STATUS    RESTARTS   AGE
frontend-b94sl   1/1     Running   0          20s
frontend-ft92m   1/1     Running   0          20s
# 查询pod和pod的labels
[root@master01 myapp]# kubectl get pod --show-labels
NAME             READY   STATUS    RESTARTS   AGE   LABELS
frontend-b94sl   1/1     Running   0          57s   app=frontend
frontend-ft92m   1/1     Running   0          57s   app=frontend
# 更改pod的label
[root@master01 myapp]# kubectl label pod frontend-b94sl app=frontend1 --overwrite
pod/frontend-b94sl labeled
# 会发现标签改变了，会新起一个pod
[root@master01 myapp]# kubectl get pod --show-labels
NAME             READY   STATUS    RESTARTS   AGE     LABELS
frontend-b94sl   1/1     Running   0          2m16s   app=frontend1
frontend-ft92m   1/1     Running   0          2m16s   app=frontend
frontend-rmr9j   1/1     Running   0          16s     app=frontend
# 删除rs 不会的pod app=frountend1 对应的pod，这里删错了   
[root@master01 myapp]# kubectl delete pod --all
pod "frontend-b94sl" deleted
pod "frontend-ft92m" deleted
pod "frontend-rmr9j" deleted
[root@master01 myapp]# kubectl get pod --show-labels
NAME             READY   STATUS              RESTARTS   AGE   LABELS
frontend-jf8ql   0/1     ContainerCreating   0          14s   app=frontend
frontend-n7rpz   0/1     ContainerCreating   0          14s   app=frontend
[root@master01 myapp]# kubectl get rs
NAME       DESIRED   CURRENT   READY   AGE
frontend   2         2         2       7m9s

```

